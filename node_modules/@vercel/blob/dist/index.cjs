"use strict";Object.defineProperty(exports, "__esModule", {value: true});









var _chunkE34P7WHIcjs = require('./chunk-E34P7WHI.cjs');

// src/del.ts
async function del(url, options) {
  await _chunkE34P7WHIcjs.requestApi.call(void 0, 
    "/delete",
    {
      method: "POST",
      headers: { "content-type": "application/json" },
      body: JSON.stringify({ urls: Array.isArray(url) ? url : [url] })
    },
    options
  );
}

// src/head.ts
async function head(url, options) {
  const searchParams = new URLSearchParams({ url });
  const headResult = await _chunkE34P7WHIcjs.requestApi.call(void 0, 
    `?${searchParams.toString()}`,
    // HEAD can't have body as a response, so we use GET
    { method: "GET" },
    options
  );
  return mapBlobResult(headResult);
}
function mapBlobResult(blobResult) {
  return {
    ...blobResult,
    uploadedAt: new Date(blobResult.uploadedAt)
  };
}

// src/list.ts
async function list(options) {
  var _a;
  const searchParams = new URLSearchParams();
  if (options == null ? void 0 : options.limit) {
    searchParams.set("limit", options.limit.toString());
  }
  if (options == null ? void 0 : options.prefix) {
    searchParams.set("prefix", options.prefix);
  }
  if (options == null ? void 0 : options.cursor) {
    searchParams.set("cursor", options.cursor);
  }
  if (options == null ? void 0 : options.mode) {
    searchParams.set("mode", options.mode);
  }
  const results = await _chunkE34P7WHIcjs.requestApi.call(void 0, 
    `?${searchParams.toString()}`,
    { method: "GET" },
    options
  );
  if ((options == null ? void 0 : options.mode) === "folded") {
    return {
      folders: (_a = results.folders) != null ? _a : [],
      cursor: results.cursor,
      hasMore: results.hasMore,
      blobs: results.blobs.map(mapBlobResult2)
    };
  }
  return {
    cursor: results.cursor,
    hasMore: results.hasMore,
    blobs: results.blobs.map(mapBlobResult2)
  };
}
function mapBlobResult2(blobResult) {
  return {
    ...blobResult,
    uploadedAt: new Date(blobResult.uploadedAt)
  };
}

// src/copy.ts
async function copy(fromUrl, toPathname, options) {
  if (!options) {
    throw new (0, _chunkE34P7WHIcjs.BlobError)("missing options, see usage");
  }
  if (options.access !== "public") {
    throw new (0, _chunkE34P7WHIcjs.BlobError)('access must be "public"');
  }
  const headers = {};
  if (options.addRandomSuffix !== void 0) {
    headers["x-add-random-suffix"] = options.addRandomSuffix ? "1" : "0";
  }
  if (options.contentType) {
    headers["x-content-type"] = options.contentType;
  }
  if (options.cacheControlMaxAge !== void 0) {
    headers["x-cache-control-max-age"] = options.cacheControlMaxAge.toString();
  }
  return _chunkE34P7WHIcjs.requestApi.call(void 0, 
    `/${toPathname}?fromUrl=${fromUrl}`,
    { method: "PUT", headers },
    options
  );
}

// src/index.ts
var put = _chunkE34P7WHIcjs.createPutMethod.call(void 0, {
  allowedOptions: ["cacheControlMaxAge", "addRandomSuffix", "contentType"]
});













exports.BlobAccessError = _chunkE34P7WHIcjs.BlobAccessError; exports.BlobError = _chunkE34P7WHIcjs.BlobError; exports.BlobNotFoundError = _chunkE34P7WHIcjs.BlobNotFoundError; exports.BlobServiceNotAvailable = _chunkE34P7WHIcjs.BlobServiceNotAvailable; exports.BlobStoreNotFoundError = _chunkE34P7WHIcjs.BlobStoreNotFoundError; exports.BlobStoreSuspendedError = _chunkE34P7WHIcjs.BlobStoreSuspendedError; exports.BlobUnknownError = _chunkE34P7WHIcjs.BlobUnknownError; exports.copy = copy; exports.del = del; exports.head = head; exports.list = list; exports.put = put;
//# sourceMappingURL=index.cjs.map